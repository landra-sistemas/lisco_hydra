{"version":3,"file":"lisco_hydra.umd.js","sources":["../src/HydraServer.mjs","../src/HydraClusterServer.mjs"],"sourcesContent":["import { Server } from \"@landra_sistemas/lisco\";\r\nimport { HydraIntegrationPlugin } from \"hydra-integration\";\r\nimport hydra from \"hydra\";\r\n\r\nexport default class HydraServer extends Server {\r\n    async initialize() {\r\n        if (!this.express_config?.hydra) {\r\n            throw new Error(\"HydraServer: config.hydra is required\");\r\n        }\r\n        //Iniciar hydra en modo plugin\r\n        hydra.use(new HydraIntegrationPlugin());\r\n        await hydra.init({\r\n            hydra: this.express_config?.hydra,\r\n        });\r\n        console.log(\"configured hydra\");\r\n        await hydra.registerService();\r\n\r\n        //Sobreescribir la app para que la configuracion del server se realice normalmente.\r\n        this.app = await hydra.integration.getService();\r\n\r\n        //Save for later use\r\n        this.hydra = hydra;\r\n\r\n        //Continuar con la inicializacion normalmente\r\n        await super.initialize();\r\n    }\r\n}\r\n","import { ClusterServer } from \"@landra_sistemas/lisco\";\r\n\r\nexport default class HydraClusterServer extends ClusterServer {\r\n    constructor(app) {\r\n        super(app);\r\n    }\r\n\r\n    async initUnclustered() {\r\n        await this.server.initialize();\r\n        //Ignorar el arranque del server y realizar solo la config. Se hace autom√°ticamente en hydra.\r\n\r\n        //Save for later use as App.hydra\r\n        this.app.hydra = this.server.hydra;\r\n    }\r\n}\r\n"],"names":["HydraServer","initialize","express_config","hydra","Error","use","HydraIntegrationPlugin","init","console","log","registerService","integration","getService","app","Server","HydraClusterServer","initUnclustered","server","ClusterServer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;MAIqBA;;;;;;;;;WACXC;EAAa,IAAA,IAAA;EAAA,MAAA,IAAA,qBAAA,EAAA,sBAAA,CAAA;;EAAA,MAAA,IAAA,MAAA,GACV,IADU,CAAA;;EACf,MAAA,IAAI,2BAAC,MAAKC,CAAAA,cAAN,aAAC,qBAAqBC,CAAAA,KAAtB,CAAJ,EAAiC;EAC7B,QAAA,MAAM,IAAIC,KAAJ,CAAU,uCAAV,CAAN,CAAA;EACH,OAHc;;;EAKfD,MAAAA,yBAAK,CAACE,GAAN,CAAU,IAAIC,uCAAJ,EAAV,CAAA,CAAA;QALe,OAMTH,OAAAA,CAAAA,OAAAA,CAAAA,yBAAK,CAACI,IAAN,CAAW;EACbJ,QAAAA,KAAK,EAAE,CAAA,sBAAA,GAAA,MAAA,CAAKD,cAAP,KAAA,IAAA,GAAA,KAAA,CAAA,GAAE,sBAAqBC,CAAAA,KAAAA;EADf,OAAX,CANS,CAAA,CAAA,IAAA,CAAA,YAAA;UASfK,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAAA,CAAA;UATe,OAUTN,OAAAA,CAAAA,OAAAA,CAAAA,yBAAK,CAACO,eAAN,EAVS,CAAA,CAAA,IAAA,CAAA,YAAA;EAYf;EAZe,UAAA,OAAA,OAAA,CAAA,OAAA,CAaEP,yBAAK,CAACQ,WAAN,CAAkBC,UAAlB,EAbF,CAAA,CAAA,IAAA,CAAA,UAAA,qBAAA,EAAA;EAaf,YAAA,MAAA,CAAKC,GAAL,GAAA,qBAAA,CAAA;EAEA;EACA,YAAA,MAAA,CAAKV,KAAL,GAAaA,yBAAb,CAhBe;;EAAA,YAAA,OAAA,OAAA,CAAA,OAAA,CAAA,OAAA,CAAA,SAAA,CAmBHF,UAnBG,CAAA,IAAA,CAAA,MAAA,CAAA,CAAA,CAAA,IAAA,CAAA,YAAA,EAAA,CAAA,CAAA;EAAA,WAAA,CAAA,CAAA;EAAA,SAAA,CAAA,CAAA;EAAA,OAAA,CAAA,CAAA;;;;;;;IADkBa;;MCFpBC;;;EACjB,EAAA,SAAA,kBAAA,CAAYF,GAAZ,EAAiB;MAAA,OACb,cAAA,CAAA,IAAA,CAAA,IAAA,EAAMA,GAAN,CADa,IAAA,IAAA,CAAA;EAEhB,GAAA;;;;WAEKG;EAAkB,IAAA,IAAA;EAAA,MAAA,IAAA,MAAA,GACd,IADc,CAAA;;EAAA,MAAA,OAAA,OAAA,CAAA,OAAA,CACd,MAAKC,CAAAA,MAAL,CAAYhB,UAAZ,EADc,CAAA,CAAA,IAAA,CAAA,YAAA;EAEpB;EAEA;EACA,QAAA,MAAA,CAAKY,GAAL,CAASV,KAAT,GAAiB,MAAKc,CAAAA,MAAL,CAAYd,KAA7B,CAAA;EALoB,OAAA,CAAA,CAAA;;;;;;;IALoBe;;;;;;;;;"}